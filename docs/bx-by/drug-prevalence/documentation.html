<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../mtflogo.gif" rel="icon" type="image/gif">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script>window.onload = function() {document.getElementById("autocomplete-0-input").placeholder = "Search All Drugs";};</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Documentation">
<meta property="og:description" content="Drug Prevalence Dashboard">
<meta property="og:site-name" content="Monitoring The Future">
<meta name="twitter:title" content="Documentation">
<meta name="twitter:description" content="Drug Prevalence Dashboard">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Monitoring The Future</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="../../contact.html" rel="" target=""><i class="bi bi-question-square" role="img">
</i> 
 <span class="dropdown-text">Ask a Question</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Documentation</h1>
<p class="subtitle lead">Drug Prevalence Dashboard</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="table-wide-format" class="level2">
<h2 class="anchored" data-anchor-id="table-wide-format">Table Wide Format</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" data-startfrom="11" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 10;"><span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>wideTable <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;style&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="vs">.branch {overflow-x:scroll; direction: rtl; margin-left:200px;  }</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="vs">td:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(1), th:first-child  {left: 110px; white-space:nowrap; word-wrap: break-word; }</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(2), th:nth-child(2) {left: 210px; word-wrap: break-word;} </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="vs">td, th { vertical-align: middle;  padding: .5em; color: black; }</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="vs">th { text-decoration: underline; white-space:nowrap; }  </span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="vs">tr:nth-child(3) {</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: #ADD8E6;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="vs">} </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="vs">table {</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="vs">  direction: ltr;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: none;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-collapse: collapse;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="vs">  text-align: center;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="vs">/* On screens that are 1720px or less, do this for the table and citation size */</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="vs">@media screen and (max-width: 1680px) {</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="vs">  .branch {overflow-x:scroll; direction: rtl; margin-left:190px;  }</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="vs">td:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} </span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(1), th:first-child  {left: 90px; white-space:nowrap; word-wrap: break-word; }</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(2), th:nth-child(2) {left: 190px; word-wrap: break-word;}</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="vs">tr:nth-child(3) {</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: #ADD8E6;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="vs">/* On screens that are 1720px or less, do this for the table */</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="vs">@media screen and (max-width: 1375px) {</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="vs">  .branch {overflow-x:scroll; direction: rtl; margin-left:180px;  }</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="vs">td:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} </span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(1), th:first-child  {left: 65px; white-space:nowrap; word-wrap: break-word; }</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(2), th:nth-child(2) {left: 170px; word-wrap: break-word;}</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="vs">tr:nth-child(3) {</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: #ADD8E6;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="vs">/* On screens that are 992px or less, do this for the table and citation size */</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="vs">@media screen and (max-width: 992px) {</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="vs">  .branch {overflow-x:scroll; direction: rtl; margin-left:175px;  }</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="vs">td:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} </span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(1), th:first-child  {left: 45px; white-space:nowrap; word-wrap: break-word; }</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(2), th:nth-child(2) {left: 145px; word-wrap: break-word;}</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="vs">tr:nth-child(3) {</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: #ADD8E6;</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="vs">/* On screens that are 600px or less, do this for table and citation size */</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="vs">@media screen and (max-width: 600px) {</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="vs">  .branch {overflow-x:scroll; direction: rtl; margin-left:155px;  }</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="vs">td:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} </span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(1), th:first-child  {left: 25px; white-space:nowrap; word-wrap: break-word; }</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="vs">td:nth-child(2), th:nth-child(2) {left: 115px; word-wrap: break-word;}</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="vs">tr:nth-child(3) {</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: #ADD8E6;</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;table aria-label="</span><span class="sc">${</span>radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">drug</span><span class="sc">}</span><span class="vs">: Trends in </span><span class="sc">${</span>radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">time</span><span class="sc">}</span><span class="vs"> Prevalence of Use in Grades 8, 10, and 12"&gt;</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;Report Interval&lt;/th&gt;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;Grade&lt;/th&gt;</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1976&lt;/th&gt;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1977&lt;/th&gt;</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1978&lt;/th&gt;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1979&lt;/th&gt;</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1980&lt;/th&gt;</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1981&lt;/th&gt;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1982&lt;/th&gt;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1983&lt;/th&gt;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1984&lt;/th&gt;</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1985&lt;/th&gt;</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1986&lt;/th&gt;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1987&lt;/th&gt;</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1988&lt;/th&gt;</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1989&lt;/th&gt;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1990&lt;/th&gt;</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1991&lt;/th&gt;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1992&lt;/th&gt;</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1993&lt;/th&gt;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1994&lt;/th&gt;</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1995&lt;/th&gt;</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1996&lt;/th&gt;</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1997&lt;/th&gt;</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1998&lt;/th&gt;</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;1999&lt;/th&gt;</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2000&lt;/th&gt;</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2001&lt;/th&gt;</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2002&lt;/th&gt;</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2003&lt;/th&gt;</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2004&lt;/th&gt;</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2005&lt;/th&gt;</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2006&lt;/th&gt;</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2007&lt;/th&gt;</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2008&lt;/th&gt;</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2009&lt;/th&gt;</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2010&lt;/th&gt;</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2011&lt;/th&gt;</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2012&lt;/th&gt;</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2013&lt;/th&gt;</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2014&lt;/th&gt;</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2015&lt;/th&gt;</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2016&lt;/th&gt;</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2017&lt;/th&gt;</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2018&lt;/th&gt;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2019&lt;sup&gt;ff&lt;/sup&gt;&lt;/th&gt;</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2020&lt;/th&gt;</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2021&lt;/th&gt;</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2022&lt;/th&gt;</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2023&lt;/th&gt;</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th scope="col"&gt;2022-2023 &lt;br&gt; Change&lt;/th&gt;</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">time</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">grade</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1976</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1977</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1978</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1979</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1980</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1981</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1982</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1983</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1984</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1985</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1986</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1987</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1988</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1989</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1990</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1991</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1992</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1993</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1994</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1995</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1996</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1997</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1998</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_1999</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2000</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2001</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2002</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2003</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2004</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2005</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2006</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2007</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2008</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2009</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2010</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2011</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2012</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2013</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2014</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2015</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2016</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2017</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2018</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2019</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2020</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2021</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2022</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">_2023</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">2</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">time</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">grade</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1976</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1977</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1978</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1979</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1980</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1981</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1982</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1983</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1984</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1985</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1986</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1987</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1988</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1989</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1990</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1991</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1992</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1993</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1994</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1995</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1996</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1997</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1998</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_1999</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2000</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2001</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2002</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2003</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2004</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2005</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2006</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2007</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2008</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2009</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2010</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2011</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2012</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2013</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2014</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2015</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2016</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2017</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2018</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2019</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2020</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2021</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2022</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">_2023</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">0</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">time</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">grade</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1976</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1977</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1978</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1979</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1980</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1981</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1982</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1983</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1984</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1985</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1986</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1987</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1988</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1989</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1990</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1991</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1992</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1993</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1994</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1995</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1996</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1997</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1998</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_1999</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2000</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2001</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2002</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2003</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2004</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2005</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2006</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2007</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2008</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2009</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2010</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2011</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2012</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2013</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2014</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2015</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2016</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2017</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2018</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2019</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2020</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2021</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2022</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">_2023</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td&gt;</span><span class="sc">${</span>htmlTables[<span class="dv">1</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<p>In ObservableJS you can embed HTML, the <code>html</code> with the two escape characters allows you to write anything that you could put within an HTML. Here I use CSS in the beginning to style the table and to make it responsive to screen size changes. Then I list out all of the estimates by connecting them to the <code>htmlTables</code> dataset. When we search for new drugs via the <code>search</code> input or change the reporting interval via the <code>radio</code> buttons it updates the dataset. The estimates change dynamically because of the <code>${}</code> which inject the newly updated estimates via javascript. I named the code cell <code>wideTable</code> to use later on.</p>
</section>
<section id="accordion-buttons" class="level2">
<h2 class="anchored" data-anchor-id="accordion-buttons">Accordion Buttons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-startfrom="300" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 299;"><span id="cb2-300"><a href="#cb2-300" aria-hidden="true" tabindex="-1"></a>accordionButtons <span class="op">=</span> </span>
<span id="cb2-301"><a href="#cb2-301" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb2-302"><a href="#cb2-302" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;div style="width: 90%" class="accordion accordion-flush" id="accordionFlushExample"&gt;</span></span>
<span id="cb2-303"><a href="#cb2-303" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="accordion-item"&gt;</span></span>
<span id="cb2-304"><a href="#cb2-304" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;h2 class="accordion-header" id="flush-headingOne"&gt;</span></span>
<span id="cb2-305"><a href="#cb2-305" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"&gt;</span></span>
<span id="cb2-306"><a href="#cb2-306" aria-hidden="true" tabindex="-1"></a><span class="vs">        Table with Detailed Estimates</span></span>
<span id="cb2-307"><a href="#cb2-307" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb2-308"><a href="#cb2-308" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/h2&gt;</span></span>
<span id="cb2-309"><a href="#cb2-309" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample"&gt;</span></span>
<span id="cb2-310"><a href="#cb2-310" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div class="accordion-body"&gt;</span></span>
<span id="cb2-311"><a href="#cb2-311" aria-hidden="true" tabindex="-1"></a><span class="vs">              &lt;div class="branch"&gt;&lt;div&gt;</span><span class="sc">${</span>wideTable<span class="sc">}</span><span class="vs">&lt;/div&gt;&lt;/div&gt;</span></span>
<span id="cb2-312"><a href="#cb2-312" aria-hidden="true" tabindex="-1"></a><span class="vs">                &lt;div&gt;</span></span>
<span id="cb2-313"><a href="#cb2-313" aria-hidden="true" tabindex="-1"></a><span class="vs">                &lt;p style="font-size: small; margin-bottom: 0px;"&gt;Note:</span></span>
<span id="cb2-314"><a href="#cb2-314" aria-hidden="true" tabindex="-1"></a><span class="vs">                      Level of significance: *=p&lt;.05, **=p&lt;.01, ***=p&lt;.001. &lt;br&gt;</span></span>
<span id="cb2-315"><a href="#cb2-315" aria-hidden="true" tabindex="-1"></a><span class="vs">                      "." indicates data is not available. &lt;br&gt;</span></span>
<span id="cb2-316"><a href="#cb2-316" aria-hidden="true" tabindex="-1"></a><span class="vs">                      "&amp;Dagger;" indicates that the question changed the following year. &lt;br&gt;</span></span>
<span id="cb2-317"><a href="#cb2-317" aria-hidden="true" tabindex="-1"></a><span class="vs">                      "&amp;sect;" indicates insufficient data for that year. &lt;br&gt;</span></span>
<span id="cb2-318"><a href="#cb2-318" aria-hidden="true" tabindex="-1"></a><span class="vs">                      &lt;a href="https://mtftablesandfigures.com/bx-by/drug-prevalence/Footnotes.pdf"&gt;Footnotes (PDF)&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</span></span>
<span id="cb2-319"><a href="#cb2-319" aria-hidden="true" tabindex="-1"></a><span class="vs">                      </span></span>
<span id="cb2-320"><a href="#cb2-320" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb2-321"><a href="#cb2-321" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb2-322"><a href="#cb2-322" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb2-323"><a href="#cb2-323" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<p>Here I am again using the <code>html</code> tag to embed some <a href="https://getbootstrap.com/docs/5.2/components/accordion/#flush"><code>accordianButtons</code></a>. Because Quarto uses Bootstrap for styling, I just need to add the class and id tags for the buttons to inherit the button styles. In addition, I use <code>${wideTable}</code> to place the reactive html table code and <code>${editdoc}</code> to place the linked google doc within the accordian buttons so that we will see it when we click on the button. I also link to a dataset that has all of the footnote letter superscripts for the prevalence figures <code>${googledoclink[0].Superscript}</code> and updates according to the drug.</p>
</section>
<section id="citation" class="level2">
<h2 class="anchored" data-anchor-id="citation">Citation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-startfrom="333" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 332;"><span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a>citation <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div style="max-width: 750px;"&gt;&lt;p style="font-size: small;"&gt;Suggested citation: Miech, R. A., Johnston, L. D., Patrick, M. E., O’Malley, P. M., Bachman, J. G., &amp; Schulenberg, J. E. (2023). Monitoring the Future National Survey Results on Drug Use, 1975–2022: Secondary School Students. Ann Arbor: Institute for Social Research, The University of Michigan. Available at &lt;a href="https://monitoringthefuture.org/results/publications/monographs/"&gt;https://monitoringthefuture.org/results/publications/monographs/&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<p>Here is the citation section that links to the monographs on the Monitoring the Future website.</p>
</section>
<section id="footnotes" class="level2">
<h2 class="anchored" data-anchor-id="footnotes">Footnotes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" data-startfrom="341" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 340;"><span id="cb4-341"><a href="#cb4-341" aria-hidden="true" tabindex="-1"></a>footnotes <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;p style="font-size: small;"&gt;&lt;span style="color:#ff57f9; font-weight:500;"&gt;2022-2023 Change Level of Significance: *=p&lt;.05, **=p&lt;.01, ***=p&lt;.001.&lt;/span&gt; &lt;br&gt; &lt;a href="https://mtftablesandfigures.com/bx-by/drug-prevalence/Footnotes.pdf"&gt;Footnotes (PDF)&lt;/a&gt;&lt;/p&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>This is the footnote uses the same <code>${googledoclink[0].Superscript}</code> to update the letter according to which drug is searched.</p>
</section>
<section id="commentary-data" class="level2">
<h2 class="anchored" data-anchor-id="commentary-data">Commentary Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-startfrom="350" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 349;"><span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a>drugCommentary <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"drug-commentary.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()</span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a>googledoclink <span class="op">=</span> drugCommentary<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb5-353"><a href="#cb5-353" aria-hidden="true" tabindex="-1"></a>  ({ DrugName }) <span class="kw">=&gt;</span> DrugName<span class="op">.</span><span class="fu">toLocaleLowerCase</span>() <span class="op">===</span> select<span class="op">.</span><span class="fu">toLocaleLowerCase</span>()</span>
<span id="cb5-354"><a href="#cb5-354" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-355"><a href="#cb5-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-356"><a href="#cb5-356" aria-hidden="true" tabindex="-1"></a>editdoc <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;iframe width="100%" height="800px" src=</span><span class="sc">${</span>googledoclink[<span class="dv">0</span>]<span class="op">.</span><span class="at">EditLink</span><span class="sc">}</span><span class="vs">&gt;&lt;/iframe&gt;`</span></span>
<span id="cb5-357"><a href="#cb5-357" aria-hidden="true" tabindex="-1"></a>publishdoc <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;iframe style="width:900px; height:900px;"src=</span><span class="sc">${</span>googledoclink[<span class="dv">0</span>]<span class="op">.</span><span class="at">PublishLink</span><span class="sc">}</span><span class="vs">&gt;&lt;/iframe&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>This is where the commentary dataset lives. It is set up to filter by <code>DrugName</code> via the <code>search</code> input. This houses the links to both the editable and the published google docs organized by drug name. In addition it has each footnote letter organized by drug name. I named each version of google doc so that I can easily switch between them.</p>
</section>
<section id="table-data" class="level2">
<h2 class="anchored" data-anchor-id="table-data">Table Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-startfrom="364" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 363;"><span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"prevalence-tables.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a>tables2 <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"prevalence-tables.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()</span>
<span id="cb6-366"><a href="#cb6-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-367"><a href="#cb6-367" aria-hidden="true" tabindex="-1"></a>tablesDrug <span class="op">=</span> tables<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a>  ({ drug }) <span class="kw">=&gt;</span> drug<span class="op">.</span><span class="fu">toLocaleLowerCase</span>() <span class="op">===</span> select<span class="op">.</span><span class="fu">toLocaleLowerCase</span>()</span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a>tablesDrug2 <span class="op">=</span> tables2<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a>  ({ drug }) <span class="kw">=&gt;</span> drug<span class="op">.</span><span class="fu">toLocaleLowerCase</span>() <span class="op">===</span> select<span class="op">.</span><span class="fu">toLocaleLowerCase</span>()</span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a>tablesDrugTime <span class="op">=</span> tablesDrug<span class="op">.</span><span class="fu">filter</span>(({ time }) <span class="kw">=&gt;</span> time <span class="op">===</span> radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">time</span>)</span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a>tablesDrugTime2 <span class="op">=</span> tablesDrug2<span class="op">.</span><span class="fu">filter</span>(({ time }) <span class="kw">=&gt;</span> time <span class="op">===</span> radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">time</span>)</span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a>tablesDrug2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-7" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb7" data-startfrom="379" data-source-offset="-511"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 378;"><span id="cb7-379"><a href="#cb7-379" aria-hidden="true" tabindex="-1"></a>tablesDrugTime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-8" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb8" data-startfrom="381" data-source-offset="-529"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 380;"><span id="cb8-381"><a href="#cb8-381" aria-hidden="true" tabindex="-1"></a>tablesDrugTime2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-9" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb9" data-startfrom="383" data-source-offset="-548"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 382;"><span id="cb9-383"><a href="#cb9-383" aria-hidden="true" tabindex="-1"></a>htmlTables <span class="op">=</span> tablesDrugTime2</span>
<span id="cb9-384"><a href="#cb9-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-385"><a href="#cb9-385" aria-hidden="true" tabindex="-1"></a>htmlTables</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-11" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>This is the data in wide format for the HTML tables. It is filtered by both <code>Drug</code> name and by <code>Time</code> reporting interval. I had to do it twice because one needs to be read by the graph for the asterisks and one needs to be displayed in the HTML tables. For some reason (still not 100% sure why) in order for the negative numbers to show in the HTML tables it needs to be untyped.</p>
</section>
<section id="plot-data" class="level2">
<h2 class="anchored" data-anchor-id="plot-data">Plot Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-startfrom="395" data-source-offset="-2"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 394;"><span id="cb10-395"><a href="#cb10-395" aria-hidden="true" tabindex="-1"></a>prevalence <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"prevalence-graphs.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb10-396"><a href="#cb10-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-397"><a href="#cb10-397" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> d3<span class="op">.</span><span class="fu">timeParse</span>(<span class="st">"%Y"</span>)</span>
<span id="cb10-398"><a href="#cb10-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-399"><a href="#cb10-399" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> { <span class="co">// This creates new variables</span></span>
<span id="cb10-400"><a href="#cb10-400" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> subset <span class="op">=</span> prevalence<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb10-401"><a href="#cb10-401" aria-hidden="true" tabindex="-1"></a>    ({ year<span class="op">,</span> drug<span class="op">,</span> estimate<span class="op">,</span> grade<span class="op">,</span> time<span class="op">,</span> LBYear1<span class="op">,</span> LBYear2 }) <span class="kw">=&gt;</span> ({</span>
<span id="cb10-402"><a href="#cb10-402" aria-hidden="true" tabindex="-1"></a>      <span class="dt">year</span><span class="op">:</span> <span class="fu">parser</span>(year)<span class="op">,</span></span>
<span id="cb10-403"><a href="#cb10-403" aria-hidden="true" tabindex="-1"></a>      <span class="dt">estimate</span><span class="op">:</span> <span class="op">+</span>estimate<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="op">,</span></span>
<span id="cb10-404"><a href="#cb10-404" aria-hidden="true" tabindex="-1"></a>      <span class="dt">drug</span><span class="op">:</span> drug<span class="op">,</span></span>
<span id="cb10-405"><a href="#cb10-405" aria-hidden="true" tabindex="-1"></a>      <span class="dt">grade</span><span class="op">:</span> grade<span class="op">,</span></span>
<span id="cb10-406"><a href="#cb10-406" aria-hidden="true" tabindex="-1"></a>      <span class="dt">time</span><span class="op">:</span> time<span class="op">,</span></span>
<span id="cb10-407"><a href="#cb10-407" aria-hidden="true" tabindex="-1"></a>      <span class="dt">LBYear1</span><span class="op">:</span> <span class="fu">parser</span>(LBYear1)<span class="op">,</span></span>
<span id="cb10-408"><a href="#cb10-408" aria-hidden="true" tabindex="-1"></a>      <span class="dt">LBYear2</span><span class="op">:</span> <span class="fu">parser</span>(LBYear2)</span>
<span id="cb10-409"><a href="#cb10-409" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb10-410"><a href="#cb10-410" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb10-411"><a href="#cb10-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-412"><a href="#cb10-412" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> subset<span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb10-413"><a href="#cb10-413" aria-hidden="true" tabindex="-1"></a>    ({ drug }) <span class="kw">=&gt;</span> drug<span class="op">.</span><span class="fu">toLocaleLowerCase</span>() <span class="op">===</span> select<span class="op">.</span><span class="fu">toLocaleLowerCase</span>()</span>
<span id="cb10-414"><a href="#cb10-414" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb10-415"><a href="#cb10-415" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-416"><a href="#cb10-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-417"><a href="#cb10-417" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>This is the data for the Plot. I attach the .csv file and use <code>.csv({ typed: true })</code> to try to have ObservableJS guess the data types of each of the variables. I do some data management to set it up to be read by Observable Plot the data visualization library. I name a time parser function <code>parser = d3.timeParse("%Y")</code> that I use later on to change the <code>year</code> variable from a number to a date <code>year: parser(year)</code> in addition I created two more variables to denote when there needs to be a line break <code>LBYear1</code> and <code>LBYear1</code>. I coerce the <code>estimate</code> variable into a number and round it to the tenths place <code>estimate: +estimate.toFixed(1)</code>. Then after I rewrite my variables I set the data to filter based on the <code>drug</code> name by the <code>search</code> input.</p>
</section>
<section id="search-bar" class="level2">
<h2 class="anchored" data-anchor-id="search-bar">Search Bar</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-startfrom="425" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 424;"><span id="cb11-425"><a href="#cb11-425" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {PersistInput} <span class="im">from</span> <span class="st">"@john-guerra/persist-input"</span></span>
<span id="cb11-426"><a href="#cb11-426" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {aq<span class="op">,</span> op} <span class="im">from</span> <span class="st">"@uwdata/arquero"</span></span>
<span id="cb11-427"><a href="#cb11-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-428"><a href="#cb11-428" aria-hidden="true" tabindex="-1"></a>viewof drugs <span class="op">=</span> aq <span class="co">// viewof shows the table view, but assigns the table value</span></span>
<span id="cb11-429"><a href="#cb11-429" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">fromCSV</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"prevalence-graphs.csv"</span>)<span class="op">.</span><span class="fu">text</span>())</span>
<span id="cb11-430"><a href="#cb11-430" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">groupby</span>(<span class="st">"drug"</span>)</span>
<span id="cb11-431"><a href="#cb11-431" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">count</span>()</span>
<span id="cb11-432"><a href="#cb11-432" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">view</span>({ <span class="dt">height</span><span class="op">:</span> <span class="dv">240</span> })</span>
<span id="cb11-433"><a href="#cb11-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-434"><a href="#cb11-434" aria-hidden="true" tabindex="-1"></a>drugSelection <span class="op">=</span> drugs<span class="op">.</span><span class="fu">objects</span>()</span>
<span id="cb11-435"><a href="#cb11-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-436"><a href="#cb11-436" aria-hidden="true" tabindex="-1"></a>viewof search <span class="op">=</span> <span class="fu">PersistInput</span>( <span class="co">// This creates a reactive input called search</span></span>
<span id="cb11-437"><a href="#cb11-437" aria-hidden="true" tabindex="-1"></a>  <span class="st">"drug"</span><span class="op">,</span></span>
<span id="cb11-438"><a href="#cb11-438" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({</span>
<span id="cb11-439"><a href="#cb11-439" aria-hidden="true" tabindex="-1"></a>    <span class="dt">datalist</span><span class="op">:</span> drugSelection<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">drug</span>)<span class="op">,</span></span>
<span id="cb11-440"><a href="#cb11-440" aria-hidden="true" tabindex="-1"></a>    <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter drug name"</span><span class="op">,</span></span>
<span id="cb11-441"><a href="#cb11-441" aria-hidden="true" tabindex="-1"></a>    <span class="dt">submit</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb11-442"><a href="#cb11-442" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Search Drug:"</span><span class="op">,</span></span>
<span id="cb11-443"><a href="#cb11-443" aria-hidden="true" tabindex="-1"></a>    <span class="dt">autocomplete</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb11-444"><a href="#cb11-444" aria-hidden="true" tabindex="-1"></a>    <span class="dt">spellcheck</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb11-445"><a href="#cb11-445" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span></span>
<span id="cb11-446"><a href="#cb11-446" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb11-447"><a href="#cb11-447" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="dropdown-input" class="level2">
<h2 class="anchored" data-anchor-id="dropdown-input">Dropdown Input</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-startfrom="455" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 454;"><span id="cb12-455"><a href="#cb12-455" aria-hidden="true" tabindex="-1"></a>viewof select <span class="op">=</span> <span class="fu">PersistInput</span>(<span class="st">"drug"</span><span class="op">,</span></span>
<span id="cb12-456"><a href="#cb12-456" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb12-457"><a href="#cb12-457" aria-hidden="true" tabindex="-1"></a>  prevalence<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">drug</span>)<span class="op">,</span></span>
<span id="cb12-458"><a href="#cb12-458" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb12-459"><a href="#cb12-459" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> <span class="st">"Alcohol"</span><span class="op">,</span></span>
<span id="cb12-460"><a href="#cb12-460" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb12-461"><a href="#cb12-461" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb12-462"><a href="#cb12-462" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-463"><a href="#cb12-463" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<p>Here I import a function from this <a href="https://observablehq.com/@john-guerra/persist-input">notebook</a> to create a persistent URL hash based on the drug name that allows users to copy the URL and share a specific drug. For example, searching for Adderall would create <code>#drug="Adderall"</code> at the end of the URL that allows you to share the dashboard with the relevant Adderall information. I also imported the <a href="https://observablehq.com/@uwdata/introducing-arquero"><code>Aquero</code></a> Library which is a data management library for JavaScript similar to R’s Tidyverse package. I group the data by <code>drug</code> with <code>.groupby("drug")</code> and create a list of drug names to choose from with <code>drugSelection = drugs.objects()</code> and <code>datalist: drugSelection.map((d) =&gt; d.drug)</code>. The <code>viewof</code> in front of <code>search</code> is unique to ObservableJS. It allows you to pair inputs with values. <a href="https://observablehq.com/@observablehq/views">Here is more information on views.</a>. Lastly, I create a if statement with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_operator">ternary operator</a>. So that if the search bar is empty, the value for the drug name defaults to Alcohol. Otherwise if there is a value submitted in the search bar it will default to that value.</p>
</section>
<section id="radio-buttons" class="level2">
<h2 class="anchored" data-anchor-id="radio-buttons">Radio Buttons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-startfrom="472" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 471;"><span id="cb13-472"><a href="#cb13-472" aria-hidden="true" tabindex="-1"></a>viewof radio <span class="op">=</span> {</span>
<span id="cb13-473"><a href="#cb13-473" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> values <span class="op">=</span> d3<span class="op">.</span><span class="fu">group</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">time</span>)<span class="op">;</span></span>
<span id="cb13-474"><a href="#cb13-474" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">radio</span>(values<span class="op">,</span> {</span>
<span id="cb13-475"><a href="#cb13-475" aria-hidden="true" tabindex="-1"></a>    <span class="dt">key</span><span class="op">:</span> values<span class="op">.</span><span class="fu">has</span>(<span class="st">"Last 12 Months"</span>)</span>
<span id="cb13-476"><a href="#cb13-476" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="st">"Last 12 Months"</span></span>
<span id="cb13-477"><a href="#cb13-477" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> values<span class="op">.</span><span class="fu">keys</span>()<span class="op">.</span><span class="fu">next</span>()<span class="op">.</span><span class="at">value</span></span>
<span id="cb13-478"><a href="#cb13-478" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb13-479"><a href="#cb13-479" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<p>This is another input called <code>radio</code> it uses the plot <code>data</code> to extract the different time periods as options. This sets <code>Last 12 Months</code> as the default reporting interval. If there is no <code>Last 12 Months</code> value, then it selects the next value within that drug’s set of reporting intervals. The <code>viewof</code> allows me to use the filtered data by reporting interval which I will refer to later on.</p>
</section>
<section id="zoom-in-button" class="level2">
<h2 class="anchored" data-anchor-id="zoom-in-button">Zoom-in Button</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" data-startfrom="490" data-source-offset="-2"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 489;"><span id="cb14-490"><a href="#cb14-490" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">buttonToggle</span>({ </span>
<span id="cb14-491"><a href="#cb14-491" aria-hidden="true" tabindex="-1"></a>  onText <span class="op">=</span> <span class="st">"Zoom in"</span><span class="op">,</span></span>
<span id="cb14-492"><a href="#cb14-492" aria-hidden="true" tabindex="-1"></a>  offText <span class="op">=</span> <span class="st">"Zoom out"</span><span class="op">,</span></span>
<span id="cb14-493"><a href="#cb14-493" aria-hidden="true" tabindex="-1"></a>  value <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb14-494"><a href="#cb14-494" aria-hidden="true" tabindex="-1"></a>  click <span class="op">=</span> (value<span class="op">,</span> clicks) <span class="kw">=&gt;</span> clicks</span>
<span id="cb14-495"><a href="#cb14-495" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb14-496"><a href="#cb14-496" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> text <span class="op">=</span> onText<span class="op">,</span></span>
<span id="cb14-497"><a href="#cb14-497" aria-hidden="true" tabindex="-1"></a>    ml <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;button type="button" class="btn btn-quarto" &gt;</span><span class="sc">${</span>text<span class="sc">}</span><span class="vs">&lt;/button&gt;`</span><span class="op">,</span></span>
<span id="cb14-498"><a href="#cb14-498" aria-hidden="true" tabindex="-1"></a>    clicks <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb14-499"><a href="#cb14-499" aria-hidden="true" tabindex="-1"></a>    v <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb14-500"><a href="#cb14-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-501"><a href="#cb14-501" aria-hidden="true" tabindex="-1"></a>  ml<span class="op">.</span><span class="at">value</span> <span class="op">=</span> v<span class="op">;</span></span>
<span id="cb14-502"><a href="#cb14-502" aria-hidden="true" tabindex="-1"></a>  ml<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb14-503"><a href="#cb14-503" aria-hidden="true" tabindex="-1"></a>    v <span class="op">=</span> <span class="fu">click</span>(v<span class="op">,</span> <span class="op">++</span>clicks)<span class="op">;</span></span>
<span id="cb14-504"><a href="#cb14-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-505"><a href="#cb14-505" aria-hidden="true" tabindex="-1"></a>    ml<span class="op">.</span><span class="at">value</span> <span class="op">=</span> v<span class="op">;</span></span>
<span id="cb14-506"><a href="#cb14-506" aria-hidden="true" tabindex="-1"></a>    ml<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> clicks <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> onText <span class="op">:</span> offText<span class="op">;</span></span>
<span id="cb14-507"><a href="#cb14-507" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb14-508"><a href="#cb14-508" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ml<span class="op">;</span></span>
<span id="cb14-509"><a href="#cb14-509" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-510"><a href="#cb14-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-511"><a href="#cb14-511" aria-hidden="true" tabindex="-1"></a>max <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>radio<span class="op">.</span><span class="fu">map</span>((o) <span class="kw">=&gt;</span> o<span class="op">.</span><span class="at">estimate</span>))</span>
<span id="cb14-512"><a href="#cb14-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-513"><a href="#cb14-513" aria-hidden="true" tabindex="-1"></a>yscale <span class="op">=</span> {</span>
<span id="cb14-514"><a href="#cb14-514" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (zoomInButton <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb14-515"><a href="#cb14-515" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]<span class="op">;</span> <span class="co">// If this statement is true, return this</span></span>
<span id="cb14-516"><a href="#cb14-516" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb14-517"><a href="#cb14-517" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="dv">0</span><span class="op">,</span> max]<span class="op">;</span> <span class="co">// If the second statement is true, return this</span></span>
<span id="cb14-518"><a href="#cb14-518" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-519"><a href="#cb14-519" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-520"><a href="#cb14-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-521"><a href="#cb14-521" aria-hidden="true" tabindex="-1"></a>viewof zoomInButton <span class="op">=</span> <span class="fu">buttonToggle</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>This is a function to create the Zoom in button. It basically updates the Y Axis of the graph from the default of 100 as the max to whatever the max is of the current drug and reporting interval. The <code>buttonToggle</code> creates a value (either even or odd) when clicked that changes the name of the button and is used within the <code>yscale</code> if statement that returns either the full scale of 100 or that drug’s max estimate. To get the max estimate <code>max = Math.max(...radio.map((o) =&gt; o.estimate))</code> It takes the <code>radio</code> dataset that is filtered by both <code>drug</code> name and <code>time</code> reporting interval and finds the max value via the <code>Math.max()</code> function bult-in to JavaScript. Then I use the <code>viewof</code> operator to be able to name the input and import it.</p>
</section>
<section id="download-data-button" class="level2">
<h2 class="anchored" data-anchor-id="download-data-button">Download Data Button</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-15" data-startfrom="530" data-source-offset="-0"><pre class="sourceCode js code-annotation-code code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 529;"><span id="annotated-cell-15-530"><a href="#annotated-cell-15-530" aria-hidden="true" tabindex="-1"></a>downloadButton <span class="op">=</span> (data<span class="op">,</span> filename) <span class="kw">=&gt;</span> {</span>
<span id="annotated-cell-15-531"><a href="#annotated-cell-15-531" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-15-532"><a href="#annotated-cell-15-532" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> downloadData<span class="op">;</span></span>
<span id="annotated-cell-15-533"><a href="#annotated-cell-15-533" aria-hidden="true" tabindex="-1"></a>  downloadData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([d3<span class="op">.</span><span class="fu">csvFormat</span>(data)]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"text/csv"</span> })<span class="op">;</span></span>
<span id="annotated-cell-15-534"><a href="#annotated-cell-15-534" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> size <span class="op">=</span> (downloadData<span class="op">.</span><span class="at">size</span> <span class="op">/</span> <span class="dv">1024</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="annotated-cell-15-535"><a href="#annotated-cell-15-535" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> button <span class="op">=</span> DOM<span class="op">.</span><span class="fu">download</span>(</span>
<span id="annotated-cell-15-536"><a href="#annotated-cell-15-536" aria-hidden="true" tabindex="-1"></a>    downloadData<span class="op">,</span></span>
<span id="annotated-cell-15-537"><a href="#annotated-cell-15-537" aria-hidden="true" tabindex="-1"></a>    filename<span class="op">,</span></span>
<span id="annotated-cell-15-538"><a href="#annotated-cell-15-538" aria-hidden="true" tabindex="-1"></a>    <span class="vs">`Download </span><span class="sc">${</span>filename<span class="sc">}</span><span class="vs"> Dataset (~</span><span class="sc">${</span>size<span class="sc">}</span><span class="vs"> KB)`</span></span>
<span id="annotated-cell-15-539"><a href="#annotated-cell-15-539" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="annotated-cell-15-540"><a href="#annotated-cell-15-540" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> button<span class="op">;</span></span>
<span id="annotated-cell-15-541"><a href="#annotated-cell-15-541" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="annotated-cell-15-542"><a href="#annotated-cell-15-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-543"><a href="#annotated-cell-15-543" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">drug</span></span>
<span id="annotated-cell-15-544"><a href="#annotated-cell-15-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-545"><a href="#annotated-cell-15-545" aria-hidden="true" tabindex="-1"></a>radioWithoutLineBreaks <span class="op">=</span> radio<span class="op">.</span><span class="fu">map</span>(obj <span class="kw">=&gt;</span> {</span>
<span id="annotated-cell-15-546"><a href="#annotated-cell-15-546" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {year<span class="op">,</span> estimate<span class="op">,</span> drug<span class="op">,</span> grade<span class="op">,</span> time} <span class="op">=</span> obj<span class="op">;</span></span>
<span id="annotated-cell-15-547"><a href="#annotated-cell-15-547" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {year<span class="op">,</span> estimate<span class="op">,</span> drug<span class="op">,</span> grade<span class="op">,</span> time}<span class="op">;</span></span>
<span id="annotated-cell-15-548"><a href="#annotated-cell-15-548" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="annotated-cell-15-549"><a href="#annotated-cell-15-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-550"><a href="#annotated-cell-15-550" aria-hidden="true" tabindex="-1"></a>downloadData <span class="op">=</span> <span class="fu">downloadButton</span>(radioWithoutLineBreaks<span class="op">,</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-12-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p><code>downloadButton</code> is a function that takes an array of data as the first argument and the name you want to call the file as the second argument. It displays the filename and the size of the file in kilobytes.</p>
</section>
<section id="plot-title" class="level2">
<h2 class="anchored" data-anchor-id="plot-title">Plot Title</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" data-startfrom="557" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 556;"><span id="cb15-557"><a href="#cb15-557" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;h3 style="color: #00008B; font-family: Times New Roman;"&gt;&lt;span style="color: red;"&gt;  </span></span>
<span id="cb15-558"><a href="#cb15-558" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">drug</span><span class="sc">}</span><span class="vs">:&lt;/span&gt; Trends in </span><span class="sc">${</span>radio[<span class="dv">0</span>]<span class="op">.</span><span class="at">time</span><span class="sc">}</span><span class="vs"> Prevalence of Use in </span><span class="sc">${</span>gradeQuestion<span class="sc">}</span><span class="vs"> &lt;/h3&gt;`</span></span>
<span id="cb15-559"><a href="#cb15-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-560"><a href="#cb15-560" aria-hidden="true" tabindex="-1"></a>gradeQuestion <span class="op">=</span> gradeTitle<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb15-561"><a href="#cb15-561" aria-hidden="true" tabindex="-1"></a>  <span class="op">?</span> <span class="st">"8th, 10th, and 12th Grade"</span></span>
<span id="cb15-562"><a href="#cb15-562" aria-hidden="true" tabindex="-1"></a>  <span class="op">:</span> <span class="st">"12th Grade"</span></span>
<span id="cb15-563"><a href="#cb15-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-564"><a href="#cb15-564" aria-hidden="true" tabindex="-1"></a>radioSet <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>(radio<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span>))</span>
<span id="cb15-565"><a href="#cb15-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-566"><a href="#cb15-566" aria-hidden="true" tabindex="-1"></a>gradeTitle <span class="op">=</span> [<span class="op">...</span>radioSet]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>This creates the title of the plot by reactively updating via the <code>radio</code> data set. First is the drug name <code>${radio[0].drug}</code> then the reporting interval <code>${radio[0].time}</code> then whether it is all grades or just 12th grade <code>${gradeQuestion}</code>. That variable is just a ternary operator that figures out if there is more than one grade variable.</p>
</section>
<section id="rendered-plot" class="level2">
<h2 class="anchored" data-anchor-id="rendered-plot">Rendered Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" data-startfrom="573" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 572;"><span id="cb16-573"><a href="#cb16-573" aria-hidden="true" tabindex="-1"></a>asterisk8th</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb17" data-startfrom="574" data-source-offset="-13"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 573;"><span id="cb17-574"><a href="#cb17-574" aria-hidden="true" tabindex="-1"></a>asterisk10th</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb18" data-startfrom="575" data-source-offset="-27"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 574;"><span id="cb18-575"><a href="#cb18-575" aria-hidden="true" tabindex="-1"></a>asterisk12th</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" data-startfrom="579" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 578;"><span id="cb19-579"><a href="#cb19-579" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {addTooltips} <span class="im">from</span> <span class="st">"@mkfreeman/plot-tooltip"</span></span>
<span id="cb19-580"><a href="#cb19-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-581"><a href="#cb19-581" aria-hidden="true" tabindex="-1"></a>formatter <span class="op">=</span> d3<span class="op">.</span><span class="fu">timeFormat</span>(<span class="st">"%Y"</span>)</span>
<span id="cb19-582"><a href="#cb19-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-583"><a href="#cb19-583" aria-hidden="true" tabindex="-1"></a>symbol <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleOrdinal</span>(</span>
<span id="cb19-584"><a href="#cb19-584" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"8th Grade"</span><span class="op">,</span> <span class="st">"10th Grade"</span><span class="op">,</span> <span class="st">"12th Grade"</span>]<span class="op">,</span></span>
<span id="cb19-585"><a href="#cb19-585" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"square"</span><span class="op">,</span> <span class="st">"circle"</span><span class="op">,</span> <span class="st">"triangle"</span>]</span>
<span id="cb19-586"><a href="#cb19-586" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-587"><a href="#cb19-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-588"><a href="#cb19-588" aria-hidden="true" tabindex="-1"></a>color <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleOrdinal</span>(</span>
<span id="cb19-589"><a href="#cb19-589" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"8th Grade"</span><span class="op">,</span> <span class="st">"10th Grade"</span><span class="op">,</span> <span class="st">"12th Grade"</span>]<span class="op">,</span></span>
<span id="cb19-590"><a href="#cb19-590" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"green"</span><span class="op">,</span> <span class="st">"blue"</span><span class="op">,</span> <span class="st">"red"</span>]</span>
<span id="cb19-591"><a href="#cb19-591" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-592"><a href="#cb19-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-593"><a href="#cb19-593" aria-hidden="true" tabindex="-1"></a>asterisk8th <span class="op">=</span> <span class="kw">typeof</span> tablesDrugTime[<span class="dv">2</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">===</span> <span class="st">"string"</span></span>
<span id="cb19-594"><a href="#cb19-594" aria-hidden="true" tabindex="-1"></a>  <span class="op">?</span> tablesDrugTime[<span class="dv">2</span>]<span class="op">.</span><span class="at">changeEstimate</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb19-595"><a href="#cb19-595" aria-hidden="true" tabindex="-1"></a>  <span class="op">:</span> (tablesDrugTime[<span class="dv">2</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">=</span> <span class="st">""</span>)</span>
<span id="cb19-596"><a href="#cb19-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-597"><a href="#cb19-597" aria-hidden="true" tabindex="-1"></a>asterisk10th <span class="op">=</span> <span class="kw">typeof</span> tablesDrugTime[<span class="dv">0</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">===</span> <span class="st">"string"</span></span>
<span id="cb19-598"><a href="#cb19-598" aria-hidden="true" tabindex="-1"></a>  <span class="op">?</span> tablesDrugTime[<span class="dv">0</span>]<span class="op">.</span><span class="at">changeEstimate</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb19-599"><a href="#cb19-599" aria-hidden="true" tabindex="-1"></a>  <span class="op">:</span> (tablesDrugTime[<span class="dv">0</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">=</span> <span class="st">""</span>)</span>
<span id="cb19-600"><a href="#cb19-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-601"><a href="#cb19-601" aria-hidden="true" tabindex="-1"></a>asterisk12th <span class="op">=</span> <span class="kw">typeof</span> tablesDrugTime[<span class="dv">1</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">===</span> <span class="st">"string"</span></span>
<span id="cb19-602"><a href="#cb19-602" aria-hidden="true" tabindex="-1"></a>  <span class="op">?</span> tablesDrugTime[<span class="dv">1</span>]<span class="op">.</span><span class="at">changeEstimate</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb19-603"><a href="#cb19-603" aria-hidden="true" tabindex="-1"></a>  <span class="op">:</span> (tablesDrugTime[<span class="dv">1</span>]<span class="op">.</span><span class="at">changeEstimate</span> <span class="op">=</span> <span class="st">""</span>)</span>
<span id="cb19-604"><a href="#cb19-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-605"><a href="#cb19-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-606"><a href="#cb19-606" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> <span class="fu">addTooltips</span>(</span>
<span id="cb19-607"><a href="#cb19-607" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb19-608"><a href="#cb19-608" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ariaLabel</span><span class="op">:</span> <span class="st">"Drug Prevalence Line Charts"</span><span class="op">,</span></span>
<span id="cb19-609"><a href="#cb19-609" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ariaDescription</span><span class="op">:</span></span>
<span id="cb19-610"><a href="#cb19-610" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Drug Prevalence Chart showing estimates of use over time (1975 to 2022) in 8th, 10th, and 12th grade filtered by drug name and reporting interval. Currently showing ${radio[0].drug}"</span><span class="op">,</span></span>
<span id="cb19-611"><a href="#cb19-611" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">900</span><span class="op">,</span></span>
<span id="cb19-612"><a href="#cb19-612" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">570</span><span class="op">,</span></span>
<span id="cb19-613"><a href="#cb19-613" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb19-614"><a href="#cb19-614" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb19-615"><a href="#cb19-615" aria-hidden="true" tabindex="-1"></a>      <span class="dt">overflow</span><span class="op">:</span> <span class="st">"visible"</span><span class="op">,</span></span>
<span id="cb19-616"><a href="#cb19-616" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span></span>
<span id="cb19-617"><a href="#cb19-617" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb19-618"><a href="#cb19-618" aria-hidden="true" tabindex="-1"></a>    <span class="dt">symbol</span><span class="op">:</span> {</span>
<span id="cb19-619"><a href="#cb19-619" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Set</span>(radio<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span>))<span class="op">,</span></span>
<span id="cb19-620"><a href="#cb19-620" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(radio<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span>))]<span class="op">.</span><span class="fu">map</span>(symbol)<span class="op">,</span></span>
<span id="cb19-621"><a href="#cb19-621" aria-hidden="true" tabindex="-1"></a>      <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-622"><a href="#cb19-622" aria-hidden="true" tabindex="-1"></a>      <span class="dt">swatchSize</span><span class="op">:</span> <span class="dv">23</span></span>
<span id="cb19-623"><a href="#cb19-623" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb19-624"><a href="#cb19-624" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb19-625"><a href="#cb19-625" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Set</span>(radio<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span>))<span class="op">,</span></span>
<span id="cb19-626"><a href="#cb19-626" aria-hidden="true" tabindex="-1"></a>      <span class="dt">range</span><span class="op">:</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(radio<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span>))]<span class="op">.</span><span class="fu">map</span>(color)</span>
<span id="cb19-627"><a href="#cb19-627" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb19-628"><a href="#cb19-628" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb19-629"><a href="#cb19-629" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Percentage (%)"</span><span class="op">,</span></span>
<span id="cb19-630"><a href="#cb19-630" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span></span>
<span id="cb19-631"><a href="#cb19-631" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> yscale</span>
<span id="cb19-632"><a href="#cb19-632" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb19-633"><a href="#cb19-633" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb19-634"><a href="#cb19-634" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"time"</span><span class="op">,</span></span>
<span id="cb19-635"><a href="#cb19-635" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"1975-01-01"</span>)<span class="op">,</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2023-01-01"</span>)]<span class="op">,</span></span>
<span id="cb19-636"><a href="#cb19-636" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Years"</span><span class="op">,</span></span>
<span id="cb19-637"><a href="#cb19-637" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span></span>
<span id="cb19-638"><a href="#cb19-638" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb19-639"><a href="#cb19-639" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb19-640"><a href="#cb19-640" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb19-641"><a href="#cb19-641" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"1975-01-01"</span>)])<span class="op">,</span></span>
<span id="cb19-642"><a href="#cb19-642" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(radio<span class="op">,</span> {</span>
<span id="cb19-643"><a href="#cb19-643" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb19-644"><a href="#cb19-644" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb19-645"><a href="#cb19-645" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"estimate"</span><span class="op">,</span></span>
<span id="cb19-646"><a href="#cb19-646" aria-hidden="true" tabindex="-1"></a>        <span class="dt">symbol</span><span class="op">:</span> <span class="st">"grade"</span><span class="op">,</span></span>
<span id="cb19-647"><a href="#cb19-647" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"grade"</span><span class="op">,</span></span>
<span id="cb19-648"><a href="#cb19-648" aria-hidden="true" tabindex="-1"></a>        <span class="dt">title</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>d<span class="op">.</span><span class="at">grade</span><span class="sc">}</span><span class="vs"> </span><span class="sc">\n</span><span class="vs"> </span><span class="sc">${</span><span class="fu">formatter</span>(d<span class="op">.</span><span class="at">year</span>)<span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>d<span class="op">.</span><span class="at">estimate</span><span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb19-649"><a href="#cb19-649" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb19-650"><a href="#cb19-650" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">line</span>(radio<span class="op">,</span> {</span>
<span id="cb19-651"><a href="#cb19-651" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb19-652"><a href="#cb19-652" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"estimate"</span><span class="op">,</span></span>
<span id="cb19-653"><a href="#cb19-653" aria-hidden="true" tabindex="-1"></a>        <span class="dt">z</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="co">// This creates the line breaks</span></span>
<span id="cb19-654"><a href="#cb19-654" aria-hidden="true" tabindex="-1"></a>          [</span>
<span id="cb19-655"><a href="#cb19-655" aria-hidden="true" tabindex="-1"></a>            d<span class="op">.</span><span class="at">grade</span><span class="op">,</span></span>
<span id="cb19-656"><a href="#cb19-656" aria-hidden="true" tabindex="-1"></a>            d<span class="op">.</span><span class="at">LBYear1</span> <span class="op">===</span> <span class="kw">null</span></span>
<span id="cb19-657"><a href="#cb19-657" aria-hidden="true" tabindex="-1"></a>              <span class="op">?</span> d<span class="op">.</span><span class="at">year</span><span class="op">.</span><span class="fu">getUTCFullYear</span>() <span class="op">&gt;</span> <span class="dv">1975</span></span>
<span id="cb19-658"><a href="#cb19-658" aria-hidden="true" tabindex="-1"></a>              <span class="op">:</span> d<span class="op">.</span><span class="at">year</span><span class="op">.</span><span class="fu">getUTCFullYear</span>() <span class="op">&gt;</span> d<span class="op">.</span><span class="at">LBYear1</span><span class="op">.</span><span class="fu">getUTCFullYear</span>()<span class="op">,</span></span>
<span id="cb19-659"><a href="#cb19-659" aria-hidden="true" tabindex="-1"></a>            d<span class="op">.</span><span class="at">LBYear2</span> <span class="op">===</span> <span class="kw">null</span></span>
<span id="cb19-660"><a href="#cb19-660" aria-hidden="true" tabindex="-1"></a>              <span class="op">?</span> d<span class="op">.</span><span class="at">year</span><span class="op">.</span><span class="fu">getUTCFullYear</span>() <span class="op">&gt;</span> <span class="dv">1975</span></span>
<span id="cb19-661"><a href="#cb19-661" aria-hidden="true" tabindex="-1"></a>              <span class="op">:</span> d<span class="op">.</span><span class="at">year</span><span class="op">.</span><span class="fu">getUTCFullYear</span>() <span class="op">&gt;</span> d<span class="op">.</span><span class="at">LBYear2</span><span class="op">.</span><span class="fu">getUTCFullYear</span>()</span>
<span id="cb19-662"><a href="#cb19-662" aria-hidden="true" tabindex="-1"></a>          ]<span class="op">.</span><span class="fu">join</span>()<span class="op">,</span></span>
<span id="cb19-663"><a href="#cb19-663" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"grade"</span></span>
<span id="cb19-664"><a href="#cb19-664" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb19-665"><a href="#cb19-665" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-666"><a href="#cb19-666" aria-hidden="true" tabindex="-1"></a>        radio<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span> <span class="op">===</span> <span class="st">"8th Grade"</span>)<span class="op">,</span></span>
<span id="cb19-667"><a href="#cb19-667" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">selectLast</span>({</span>
<span id="cb19-668"><a href="#cb19-668" aria-hidden="true" tabindex="-1"></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb19-669"><a href="#cb19-669" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"estimate"</span><span class="op">,</span></span>
<span id="cb19-670"><a href="#cb19-670" aria-hidden="true" tabindex="-1"></a>          <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb19-671"><a href="#cb19-671" aria-hidden="true" tabindex="-1"></a>            <span class="vs">`</span><span class="sc">${</span>tablesDrugTime[<span class="dv">2</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">substring</span>(asterisk8th)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> <span class="co">// This is the label that displays in the tooltip</span></span>
<span id="cb19-672"><a href="#cb19-672" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb19-673"><a href="#cb19-673" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ff57f9"</span><span class="op">,</span></span>
<span id="cb19-674"><a href="#cb19-674" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb19-675"><a href="#cb19-675" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb19-676"><a href="#cb19-676" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb19-677"><a href="#cb19-677" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb19-678"><a href="#cb19-678" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb19-679"><a href="#cb19-679" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-680"><a href="#cb19-680" aria-hidden="true" tabindex="-1"></a>        radio<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span> <span class="op">===</span> <span class="st">"10th Grade"</span>)<span class="op">,</span></span>
<span id="cb19-681"><a href="#cb19-681" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">selectLast</span>({</span>
<span id="cb19-682"><a href="#cb19-682" aria-hidden="true" tabindex="-1"></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb19-683"><a href="#cb19-683" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"estimate"</span><span class="op">,</span></span>
<span id="cb19-684"><a href="#cb19-684" aria-hidden="true" tabindex="-1"></a>          <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb19-685"><a href="#cb19-685" aria-hidden="true" tabindex="-1"></a>            <span class="vs">`</span><span class="sc">${</span>tablesDrugTime[<span class="dv">0</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="op">?.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">substring</span>(asterisk10th)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb19-686"><a href="#cb19-686" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb19-687"><a href="#cb19-687" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ff57f9"</span><span class="op">,</span></span>
<span id="cb19-688"><a href="#cb19-688" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb19-689"><a href="#cb19-689" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb19-690"><a href="#cb19-690" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb19-691"><a href="#cb19-691" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb19-692"><a href="#cb19-692" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb19-693"><a href="#cb19-693" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb19-694"><a href="#cb19-694" aria-hidden="true" tabindex="-1"></a>        radio<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">grade</span> <span class="op">===</span> <span class="st">"12th Grade"</span>)<span class="op">,</span></span>
<span id="cb19-695"><a href="#cb19-695" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">selectLast</span>({</span>
<span id="cb19-696"><a href="#cb19-696" aria-hidden="true" tabindex="-1"></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb19-697"><a href="#cb19-697" aria-hidden="true" tabindex="-1"></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"estimate"</span><span class="op">,</span></span>
<span id="cb19-698"><a href="#cb19-698" aria-hidden="true" tabindex="-1"></a>          <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb19-699"><a href="#cb19-699" aria-hidden="true" tabindex="-1"></a>            <span class="vs">`</span><span class="sc">${</span>tablesDrugTime[<span class="dv">1</span>]<span class="op">?.</span><span class="at">changeEstimate</span><span class="op">?.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">substring</span>(asterisk12th)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb19-700"><a href="#cb19-700" aria-hidden="true" tabindex="-1"></a>          <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb19-701"><a href="#cb19-701" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ff57f9"</span><span class="op">,</span></span>
<span id="cb19-702"><a href="#cb19-702" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb19-703"><a href="#cb19-703" aria-hidden="true" tabindex="-1"></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb19-704"><a href="#cb19-704" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb19-705"><a href="#cb19-705" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb19-706"><a href="#cb19-706" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-707"><a href="#cb19-707" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb19-708"><a href="#cb19-708" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb19-709"><a href="#cb19-709" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">fill</span><span class="op">:</span> <span class="st">"grade"</span> }</span>
<span id="cb19-710"><a href="#cb19-710" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-8" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Here I import a tooltip via this <a href="https://observablehq.com/@mkfreeman/plot-tooltip">notebook</a> Observable has created new tooltips since I wrote this code. So I may go back and change it but for now I am still using the imported <code>addTooltip()</code> function. I create the color and symbol scales for the grades and name a function to format the year. Then I create three functions that check if the results of the significance test within the <code>htmlTable</code> dataset have astersisk. If they do then I display them in the graph. If they don’t nothing is displayed. For more on how the graph is made check out <a href="https://observablehq.com/plot/">Observable Plot</a>.</p>


</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"wideTable = html`\r\n<style>\r\n.branch {overflow-x:scroll; direction: rtl; margin-left:200px;  }\r\ntd:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} \r\ntd:nth-child(1), th:first-child  {left: 110px; white-space:nowrap; word-wrap: break-word; }\r\ntd:nth-child(2), th:nth-child(2) {left: 210px; word-wrap: break-word;} \r\ntd, th { vertical-align: middle;  padding: .5em; color: black; }\r\nth { text-decoration: underline; white-space:nowrap; }  \r\ntr:nth-child(3) {\r\n  background-color: #ADD8E6;\r\n} \r\ntable {\r\n  direction: ltr;\r\n  border: none;\r\n  border-collapse: collapse;\r\n  text-align: center;\r\n}\r\n\r\n\r\n/* On screens that are 1720px or less, do this for the table and citation size */\r\n\r\n@media screen and (max-width: 1680px) {\r\n  .branch {overflow-x:scroll; direction: rtl; margin-left:190px;  }\r\ntd:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} \r\ntd:nth-child(1), th:first-child  {left: 90px; white-space:nowrap; word-wrap: break-word; }\r\ntd:nth-child(2), th:nth-child(2) {left: 190px; word-wrap: break-word;}\r\ntr:nth-child(3) {\r\n  background-color: #ADD8E6;\r\n}\r\n}\r\n\r\n/* On screens that are 1720px or less, do this for the table */\r\n\r\n@media screen and (max-width: 1375px) {\r\n  .branch {overflow-x:scroll; direction: rtl; margin-left:180px;  }\r\ntd:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} \r\ntd:nth-child(1), th:first-child  {left: 65px; white-space:nowrap; word-wrap: break-word; }\r\ntd:nth-child(2), th:nth-child(2) {left: 170px; word-wrap: break-word;}\r\ntr:nth-child(3) {\r\n  background-color: #ADD8E6;\r\n}\r\n}\r\n\r\n\r\n/* On screens that are 992px or less, do this for the table and citation size */\r\n\r\n@media screen and (max-width: 992px) {\r\n  .branch {overflow-x:scroll; direction: rtl; margin-left:175px;  }\r\ntd:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} \r\ntd:nth-child(1), th:first-child  {left: 45px; white-space:nowrap; word-wrap: break-word; }\r\ntd:nth-child(2), th:nth-child(2) {left: 145px; word-wrap: break-word;}\r\ntr:nth-child(3) {\r\n  background-color: #ADD8E6;\r\n}\r\n}\r\n\r\n\r\n/* On screens that are 600px or less, do this for table and citation size */\r\n@media screen and (max-width: 600px) {\r\n  .branch {overflow-x:scroll; direction: rtl; margin-left:155px;  }\r\ntd:first-child, td:nth-child(2), th:first-child, th:nth-child(2) {position:absolute; width:100px; top:auto; white-space:normal;} \r\ntd:nth-child(1), th:first-child  {left: 25px; white-space:nowrap; word-wrap: break-word; }\r\ntd:nth-child(2), th:nth-child(2) {left: 115px; word-wrap: break-word;}\r\ntr:nth-child(3) {\r\n  background-color: #ADD8E6;\r\n}\r\n}\r\n</style>\r\n<table aria-label=\"${radio[0].drug}: Trends in ${radio[0].time} Prevalence of Use in Grades 8, 10, and 12\">\r\n  <tr>\r\n    <th scope=\"col\">Report Interval</th>\r\n    <th scope=\"col\">Grade</th>\r\n    <th scope=\"col\">1976</th>\r\n    <th scope=\"col\">1977</th>\r\n    <th scope=\"col\">1978</th>\r\n    <th scope=\"col\">1979</th>\r\n    <th scope=\"col\">1980</th>\r\n    <th scope=\"col\">1981</th>\r\n    <th scope=\"col\">1982</th>\r\n    <th scope=\"col\">1983</th>\r\n    <th scope=\"col\">1984</th>\r\n    <th scope=\"col\">1985</th>\r\n    <th scope=\"col\">1986</th>\r\n    <th scope=\"col\">1987</th>\r\n    <th scope=\"col\">1988</th>\r\n    <th scope=\"col\">1989</th>\r\n    <th scope=\"col\">1990</th>\r\n    <th scope=\"col\">1991</th>\r\n    <th scope=\"col\">1992</th>\r\n    <th scope=\"col\">1993</th>\r\n    <th scope=\"col\">1994</th>\r\n    <th scope=\"col\">1995</th>\r\n    <th scope=\"col\">1996</th>\r\n    <th scope=\"col\">1997</th>\r\n    <th scope=\"col\">1998</th>\r\n    <th scope=\"col\">1999</th>\r\n    <th scope=\"col\">2000</th>\r\n    <th scope=\"col\">2001</th>\r\n    <th scope=\"col\">2002</th>\r\n    <th scope=\"col\">2003</th>\r\n    <th scope=\"col\">2004</th>\r\n    <th scope=\"col\">2005</th>\r\n    <th scope=\"col\">2006</th>\r\n    <th scope=\"col\">2007</th>\r\n    <th scope=\"col\">2008</th>\r\n    <th scope=\"col\">2009</th>\r\n    <th scope=\"col\">2010</th>\r\n    <th scope=\"col\">2011</th>\r\n    <th scope=\"col\">2012</th>\r\n    <th scope=\"col\">2013</th>\r\n    <th scope=\"col\">2014</th>\r\n    <th scope=\"col\">2015</th>\r\n    <th scope=\"col\">2016</th>\r\n    <th scope=\"col\">2017</th>\r\n    <th scope=\"col\">2018</th>\r\n    <th scope=\"col\">2019<sup>ff</sup></th>\r\n    <th scope=\"col\">2020</th>\r\n    <th scope=\"col\">2021</th>\r\n    <th scope=\"col\">2022</th>\r\n    <th scope=\"col\">2023</th>\r\n    <th scope=\"col\">2022-2023 <br> Change</th>\r\n  </tr>\r\n  <tr>\r\n    <td>${htmlTables[2]?.time}</td>\r\n    <td>${htmlTables[2]?.grade}</td>\r\n    <td>${htmlTables[2]?._1976}</td>\r\n    <td>${htmlTables[2]?._1977}</td>\r\n    <td>${htmlTables[2]?._1978}</td>\r\n    <td>${htmlTables[2]?._1979}</td>\r\n    <td>${htmlTables[2]?._1980}</td>\r\n    <td>${htmlTables[2]?._1981}</td>\r\n    <td>${htmlTables[2]?._1982}</td>\r\n    <td>${htmlTables[2]?._1983}</td>\r\n    <td>${htmlTables[2]?._1984}</td>\r\n    <td>${htmlTables[2]?._1985}</td>\r\n    <td>${htmlTables[2]?._1986}</td>\r\n    <td>${htmlTables[2]?._1987}</td>\r\n    <td>${htmlTables[2]?._1988}</td>\r\n    <td>${htmlTables[2]?._1989}</td>\r\n    <td>${htmlTables[2]?._1990}</td>\r\n    <td>${htmlTables[2]?._1991}</td>\r\n    <td>${htmlTables[2]?._1992}</td>\r\n    <td>${htmlTables[2]?._1993}</td>\r\n    <td>${htmlTables[2]?._1994}</td>\r\n    <td>${htmlTables[2]?._1995}</td>\r\n    <td>${htmlTables[2]?._1996}</td>\r\n    <td>${htmlTables[2]?._1997}</td>\r\n    <td>${htmlTables[2]?._1998}</td>\r\n    <td>${htmlTables[2]?._1999}</td>\r\n    <td>${htmlTables[2]?._2000}</td>\r\n    <td>${htmlTables[2]?._2001}</td>\r\n    <td>${htmlTables[2]?._2002}</td>\r\n    <td>${htmlTables[2]?._2003}</td>\r\n    <td>${htmlTables[2]?._2004}</td>\r\n    <td>${htmlTables[2]?._2005}</td>\r\n    <td>${htmlTables[2]?._2006}</td>\r\n    <td>${htmlTables[2]?._2007}</td>\r\n    <td>${htmlTables[2]?._2008}</td>\r\n    <td>${htmlTables[2]?._2009}</td>\r\n    <td>${htmlTables[2]?._2010}</td>\r\n    <td>${htmlTables[2]?._2011}</td>\r\n    <td>${htmlTables[2]?._2012}</td>\r\n    <td>${htmlTables[2]?._2013}</td>\r\n    <td>${htmlTables[2]?._2014}</td>\r\n    <td>${htmlTables[2]?._2015}</td>\r\n    <td>${htmlTables[2]?._2016}</td>\r\n    <td>${htmlTables[2]?._2017}</td>\r\n    <td>${htmlTables[2]?._2018}</td>\r\n    <td>${htmlTables[2]?._2019}</td>\r\n    <td>${htmlTables[2]?._2020}</td>\r\n    <td>${htmlTables[2]?._2021}</td>\r\n    <td>${htmlTables[2]?._2022}</td>\r\n    <td>${htmlTables[2]?._2023}</td>\r\n    <td>${htmlTables[2]?.changeEstimate}</td>\r\n  </tr>\r\n  <tr>\r\n    <td>${htmlTables[0]?.time}</td>\r\n    <td>${htmlTables[0]?.grade}</td>\r\n    <td>${htmlTables[0]?._1976}</td>\r\n    <td>${htmlTables[0]?._1977}</td>\r\n    <td>${htmlTables[0]?._1978}</td>\r\n    <td>${htmlTables[0]?._1979}</td>\r\n    <td>${htmlTables[0]?._1980}</td>\r\n    <td>${htmlTables[0]?._1981}</td>\r\n    <td>${htmlTables[0]?._1982}</td>\r\n    <td>${htmlTables[0]?._1983}</td>\r\n    <td>${htmlTables[0]?._1984}</td>\r\n    <td>${htmlTables[0]?._1985}</td>\r\n    <td>${htmlTables[0]?._1986}</td>\r\n    <td>${htmlTables[0]?._1987}</td>\r\n    <td>${htmlTables[0]?._1988}</td>\r\n    <td>${htmlTables[0]?._1989}</td>\r\n    <td>${htmlTables[0]?._1990}</td>\r\n    <td>${htmlTables[0]?._1991}</td>\r\n    <td>${htmlTables[0]?._1992}</td>\r\n    <td>${htmlTables[0]?._1993}</td>\r\n    <td>${htmlTables[0]?._1994}</td>\r\n    <td>${htmlTables[0]?._1995}</td>\r\n    <td>${htmlTables[0]?._1996}</td>\r\n    <td>${htmlTables[0]?._1997}</td>\r\n    <td>${htmlTables[0]?._1998}</td>\r\n    <td>${htmlTables[0]?._1999}</td>\r\n    <td>${htmlTables[0]?._2000}</td>\r\n    <td>${htmlTables[0]?._2001}</td>\r\n    <td>${htmlTables[0]?._2002}</td>\r\n    <td>${htmlTables[0]?._2003}</td>\r\n    <td>${htmlTables[0]?._2004}</td>\r\n    <td>${htmlTables[0]?._2005}</td>\r\n    <td>${htmlTables[0]?._2006}</td>\r\n    <td>${htmlTables[0]?._2007}</td>\r\n    <td>${htmlTables[0]?._2008}</td>\r\n    <td>${htmlTables[0]?._2009}</td>\r\n    <td>${htmlTables[0]?._2010}</td>\r\n    <td>${htmlTables[0]?._2011}</td>\r\n    <td>${htmlTables[0]?._2012}</td>\r\n    <td>${htmlTables[0]?._2013}</td>\r\n    <td>${htmlTables[0]?._2014}</td>\r\n    <td>${htmlTables[0]?._2015}</td>\r\n    <td>${htmlTables[0]?._2016}</td>\r\n    <td>${htmlTables[0]?._2017}</td>\r\n    <td>${htmlTables[0]?._2018}</td>\r\n    <td>${htmlTables[0]?._2019}</td>\r\n    <td>${htmlTables[0]?._2020}</td>\r\n    <td>${htmlTables[0]?._2021}</td>\r\n    <td>${htmlTables[0]?._2022}</td>\r\n    <td>${htmlTables[0]?._2023}</td>\r\n    <td>${htmlTables[0]?.changeEstimate}</td>\r\n  </tr>\r\n  <tr>\r\n    <td>${htmlTables[1]?.time}</td>\r\n    <td>${htmlTables[1]?.grade}</td>\r\n    <td>${htmlTables[1]?._1976}</td>\r\n    <td>${htmlTables[1]?._1977}</td>\r\n    <td>${htmlTables[1]?._1978}</td>\r\n    <td>${htmlTables[1]?._1979}</td>\r\n    <td>${htmlTables[1]?._1980}</td>\r\n    <td>${htmlTables[1]?._1981}</td>\r\n    <td>${htmlTables[1]?._1982}</td>\r\n    <td>${htmlTables[1]?._1983}</td>\r\n    <td>${htmlTables[1]?._1984}</td>\r\n    <td>${htmlTables[1]?._1985}</td>\r\n    <td>${htmlTables[1]?._1986}</td>\r\n    <td>${htmlTables[1]?._1987}</td>\r\n    <td>${htmlTables[1]?._1988}</td>\r\n    <td>${htmlTables[1]?._1989}</td>\r\n    <td>${htmlTables[1]?._1990}</td>\r\n    <td>${htmlTables[1]?._1991}</td>\r\n    <td>${htmlTables[1]?._1992}</td>\r\n    <td>${htmlTables[1]?._1993}</td>\r\n    <td>${htmlTables[1]?._1994}</td>\r\n    <td>${htmlTables[1]?._1995}</td>\r\n    <td>${htmlTables[1]?._1996}</td>\r\n    <td>${htmlTables[1]?._1997}</td>\r\n    <td>${htmlTables[1]?._1998}</td>\r\n    <td>${htmlTables[1]?._1999}</td>\r\n    <td>${htmlTables[1]?._2000}</td>\r\n    <td>${htmlTables[1]?._2001}</td>\r\n    <td>${htmlTables[1]?._2002}</td>\r\n    <td>${htmlTables[1]?._2003}</td>\r\n    <td>${htmlTables[1]?._2004}</td>\r\n    <td>${htmlTables[1]?._2005}</td>\r\n    <td>${htmlTables[1]?._2006}</td>\r\n    <td>${htmlTables[1]?._2007}</td>\r\n    <td>${htmlTables[1]?._2008}</td>\r\n    <td>${htmlTables[1]?._2009}</td>\r\n    <td>${htmlTables[1]?._2010}</td>\r\n    <td>${htmlTables[1]?._2011}</td>\r\n    <td>${htmlTables[1]?._2012}</td>\r\n    <td>${htmlTables[1]?._2013}</td>\r\n    <td>${htmlTables[1]?._2014}</td>\r\n    <td>${htmlTables[1]?._2015}</td>\r\n    <td>${htmlTables[1]?._2016}</td>\r\n    <td>${htmlTables[1]?._2017}</td>\r\n    <td>${htmlTables[1]?._2018}</td>\r\n    <td>${htmlTables[1]?._2019}</td>\r\n    <td>${htmlTables[1]?._2020}</td>\r\n    <td>${htmlTables[1]?._2021}</td>\r\n    <td>${htmlTables[1]?._2022}</td>\r\n    <td>${htmlTables[1]?._2023}</td>\r\n    <td>${htmlTables[1]?.changeEstimate}</td>\r\n  </tr>\r\n</table>\r\n`\r\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"accordionButtons = \r\nhtml`\r\n<div style=\"width: 90%\" class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n  <div class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\" id=\"flush-headingOne\">\r\n      <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#flush-collapseOne\" aria-expanded=\"false\" aria-controls=\"flush-collapseOne\">\r\n        Table with Detailed Estimates\r\n      </button>\r\n    </h2>\r\n    <div id=\"flush-collapseOne\" class=\"accordion-collapse collapse\" aria-labelledby=\"flush-headingOne\" data-bs-parent=\"#accordionFlushExample\">\r\n      <div class=\"accordion-body\">\r\n              <div class=\"branch\"><div>${wideTable}</div></div>\r\n                <div>\r\n                <p style=\"font-size: small; margin-bottom: 0px;\">Note:\r\n                      Level of significance: *=p<.05, **=p<.01, ***=p<.001. <br>\r\n                      \".\" indicates data is not available. <br>\r\n                      \"&Dagger;\" indicates that the question changed the following year. <br>\r\n                      \"&sect;\" indicates insufficient data for that year. <br>\r\n                      <a href=\"https://mtftablesandfigures.com/bx-by/drug-prevalence/Footnotes.pdf\">Footnotes (PDF)</a></p></div>\r\n                      \r\n          </div>\r\n    </div>\r\n  </div>\r\n</div>`\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"citation = html`<div style=\"max-width: 750px;\"><p style=\"font-size: small;\">Suggested citation: Miech, R. A., Johnston, L. D., Patrick, M. E., O’Malley, P. M., Bachman, J. G., & Schulenberg, J. E. (2023). Monitoring the Future National Survey Results on Drug Use, 1975–2022: Secondary School Students. Ann Arbor: Institute for Social Research, The University of Michigan. Available at <a href=\"https://monitoringthefuture.org/results/publications/monographs/\">https://monitoringthefuture.org/results/publications/monographs/</a></p></div>`\r\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"footnotes = html`<p style=\"font-size: small;\"><span style=\"color:#ff57f9; font-weight:500;\">2022-2023 Change Level of Significance: *=p<.05, **=p<.01, ***=p<.001.</span> <br> <a href=\"https://mtftablesandfigures.com/bx-by/drug-prevalence/Footnotes.pdf\">Footnotes (PDF)</a></p>`\r\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"drugCommentary = FileAttachment(\"drug-commentary.csv\").csv()\r\n\r\ngoogledoclink = drugCommentary.filter(\r\n  ({ DrugName }) => DrugName.toLocaleLowerCase() === select.toLocaleLowerCase()\r\n)\r\n\r\neditdoc = html`<iframe width=\"100%\" height=\"800px\" src=${googledoclink[0].EditLink}></iframe>`\r\npublishdoc = html`<iframe style=\"width:900px; height:900px;\"src=${googledoclink[0].PublishLink}></iframe>`\r\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"tables = FileAttachment(\"prevalence-tables.csv\").csv({ typed: true })\r\ntables2 = FileAttachment(\"prevalence-tables.csv\").csv()\r\n\r\ntablesDrug = tables.filter(\r\n  ({ drug }) => drug.toLocaleLowerCase() === select.toLocaleLowerCase()\r\n)\r\ntablesDrug2 = tables2.filter(\r\n  ({ drug }) => drug.toLocaleLowerCase() === select.toLocaleLowerCase()\r\n)\r\n\r\ntablesDrugTime = tablesDrug.filter(({ time }) => time === radio[0].time)\r\ntablesDrugTime2 = tablesDrug2.filter(({ time }) => time === radio[0].time)\r\n\r\ntablesDrug2\r\n\r\ntablesDrugTime\r\n\r\ntablesDrugTime2\r\n\r\nhtmlTables = tablesDrugTime2\r\n\r\nhtmlTables\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"\r\nprevalence = FileAttachment(\"prevalence-graphs.csv\").csv({ typed: true })\r\n\r\nparser = d3.timeParse(\"%Y\")\r\n\r\ndata = { // This creates new variables\r\n  const subset = prevalence.map(\r\n    ({ year, drug, estimate, grade, time, LBYear1, LBYear2 }) => ({\r\n      year: parser(year),\r\n      estimate: +estimate.toFixed(1),\r\n      drug: drug,\r\n      grade: grade,\r\n      time: time,\r\n      LBYear1: parser(LBYear1),\r\n      LBYear2: parser(LBYear2)\r\n    })\r\n  );\r\n\r\n  return subset.filter(\r\n    ({ drug }) => drug.toLocaleLowerCase() === select.toLocaleLowerCase()\r\n  );\r\n}\r\n\r\ndata\r\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"import {PersistInput} from \"@john-guerra/persist-input\"\r\nimport {aq, op} from \"@uwdata/arquero\"\r\n\r\nviewof drugs = aq // viewof shows the table view, but assigns the table value\r\n  .fromCSV(await FileAttachment(\"prevalence-graphs.csv\").text())\r\n  .groupby(\"drug\")\r\n  .count()\r\n  .view({ height: 240 })\r\n\r\ndrugSelection = drugs.objects()\r\n\r\nviewof search = PersistInput( // This creates a reactive input called search\r\n  \"drug\",\r\n  Inputs.text({\r\n    datalist: drugSelection.map((d) => d.drug),\r\n    placeholder: \"Enter drug name\",\r\n    submit: true,\r\n    label: \"Search Drug:\",\r\n    autocomplete: false,\r\n    spellcheck: true,\r\n    width: 350\r\n  })\r\n)\r\n\r\n//select = search ? search : \"Alcohol\"\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"viewof select = PersistInput(\"drug\",\r\nInputs.select(\r\n  prevalence.map((d) => d.drug),\r\n  {\r\n    value: \"Alcohol\",\r\n    width: 200,\r\n    unique: true\r\n  }\r\n))\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"\r\nviewof radio = {\r\n  const values = d3.group(data, (d) => d.time);\r\n  return Inputs.radio(values, {\r\n    key: values.has(\"Last 12 Months\")\r\n      ? \"Last 12 Months\"\r\n      : values.keys().next().value\r\n  });\r\n}\r\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"\r\nfunction buttonToggle({ \r\n  onText = \"Zoom in\",\r\n  offText = \"Zoom out\",\r\n  value = 0,\r\n  click = (value, clicks) => clicks\r\n} = {}) {\r\n  let text = onText,\r\n    ml = html`<button type=\"button\" class=\"btn btn-quarto\" >${text}</button>`,\r\n    clicks = 0,\r\n    v = value;\r\n\r\n  ml.value = v;\r\n  ml.onclick = () => {\r\n    v = click(v, ++clicks);\r\n\r\n    ml.value = v;\r\n    ml.innerHTML = clicks % 2 === 0 ? onText : offText;\r\n  };\r\n  return ml;\r\n}\r\n\r\nmax = Math.max(...radio.map((o) => o.estimate))\r\n\r\nyscale = {\r\n  if (zoomInButton % 2 == 0) {\r\n    return [0, 100]; // If this statement is true, return this\r\n  } else {\r\n    return [0, max]; // If the second statement is true, return this\r\n  }\r\n}\r\n\r\nviewof zoomInButton = buttonToggle()\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"downloadButton = (data, filename) => {\r\n  \r\n  let downloadData;\r\n  downloadData = new Blob([d3.csvFormat(data)], { type: \"text/csv\" });\r\n  const size = (downloadData.size / 1024).toFixed(0);\r\n  const button = DOM.download(\r\n    downloadData,\r\n    filename,\r\n    `Download ${filename} Dataset (~${size} KB)`\r\n  );\r\n  return button;\r\n} // <1>\r\n\r\nname = radio[0].drug\r\n\r\nradioWithoutLineBreaks = radio.map(obj => {\r\n  const {year, estimate, drug, grade, time} = obj;\r\n  return {year, estimate, drug, grade, time};\r\n});\r\n\r\ndownloadData = downloadButton(radioWithoutLineBreaks, name)\r\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"title = html`<h3 style=\"color: #00008B; font-family: Times New Roman;\"><span style=\"color: red;\">  \r\n${radio[0].drug}:</span> Trends in ${radio[0].time} Prevalence of Use in ${gradeQuestion} </h3>`\r\n\r\ngradeQuestion = gradeTitle.length > 1\r\n  ? \"8th, 10th, and 12th Grade\"\r\n  : \"12th Grade\"\r\n\r\nradioSet = new Set(radio.map((d) => d.grade))\r\n\r\ngradeTitle = [...radioSet]\r\n\r\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"asterisk8th\r\nasterisk10th\r\nasterisk12th\r\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"import {addTooltips} from \"@mkfreeman/plot-tooltip\"\r\n\r\nformatter = d3.timeFormat(\"%Y\")\r\n\r\nsymbol = d3.scaleOrdinal(\r\n  [\"8th Grade\", \"10th Grade\", \"12th Grade\"],\r\n  [\"square\", \"circle\", \"triangle\"]\r\n)\r\n\r\ncolor = d3.scaleOrdinal(\r\n  [\"8th Grade\", \"10th Grade\", \"12th Grade\"],\r\n  [\"green\", \"blue\", \"red\"]\r\n)\r\n\r\nasterisk8th = typeof tablesDrugTime[2].changeEstimate === \"string\"\r\n  ? tablesDrugTime[2].changeEstimate.toString().indexOf(\".\") + 2\r\n  : (tablesDrugTime[2].changeEstimate = \"\")\r\n\r\nasterisk10th = typeof tablesDrugTime[0].changeEstimate === \"string\"\r\n  ? tablesDrugTime[0].changeEstimate.toString().indexOf(\".\") + 2\r\n  : (tablesDrugTime[0].changeEstimate = \"\")\r\n\r\nasterisk12th = typeof tablesDrugTime[1].changeEstimate === \"string\"\r\n  ? tablesDrugTime[1].changeEstimate.toString().indexOf(\".\") + 2\r\n  : (tablesDrugTime[1].changeEstimate = \"\")\r\n\r\n\r\nplot = addTooltips(\r\n  Plot.plot({\r\n    ariaLabel: \"Drug Prevalence Line Charts\",\r\n    ariaDescription:\r\n      \"Drug Prevalence Chart showing estimates of use over time (1975 to 2022) in 8th, 10th, and 12th grade filtered by drug name and reporting interval. Currently showing ${radio[0].drug}\",\r\n    width: 900,\r\n    height: 570,\r\n    marginBottom: 50,\r\n    style: {\r\n      overflow: \"visible\",\r\n      fontSize: 12\r\n    },\r\n    symbol: {\r\n      domain: new Set(radio.map((d) => d.grade)),\r\n      range: [...new Set(radio.map((d) => d.grade))].map(symbol),\r\n      legend: true,\r\n      swatchSize: 23\r\n    },\r\n    color: {\r\n      domain: new Set(radio.map((d) => d.grade)),\r\n      range: [...new Set(radio.map((d) => d.grade))].map(color)\r\n    },\r\n    y: {\r\n      label: \"Percentage (%)\",\r\n      labelAnchor: \"center\",\r\n      domain: yscale\r\n    },\r\n    x: {\r\n      type: \"time\",\r\n      domain: [new Date(\"1975-01-01\"), new Date(\"2023-01-01\")],\r\n      label: \"Years\",\r\n      labelAnchor: \"center\"\r\n    },\r\n    marks: [\r\n      Plot.ruleY([0]),\r\n      Plot.ruleX([new Date(\"1975-01-01\")]),\r\n      Plot.dot(radio, {\r\n        r: 5,\r\n        x: \"year\",\r\n        y: \"estimate\",\r\n        symbol: \"grade\",\r\n        fill: \"grade\",\r\n        title: (d) => `${d.grade} \\n ${formatter(d.year)}: ${d.estimate}%`\r\n      }),\r\n      Plot.line(radio, {\r\n        x: \"year\",\r\n        y: \"estimate\",\r\n        z: (d) => // This creates the line breaks\r\n          [\r\n            d.grade,\r\n            d.LBYear1 === null\r\n              ? d.year.getUTCFullYear() > 1975\r\n              : d.year.getUTCFullYear() > d.LBYear1.getUTCFullYear(),\r\n            d.LBYear2 === null\r\n              ? d.year.getUTCFullYear() > 1975\r\n              : d.year.getUTCFullYear() > d.LBYear2.getUTCFullYear()\r\n          ].join(),\r\n        stroke: \"grade\"\r\n      }),\r\n      Plot.text(\r\n        radio.filter((d) => d.grade === \"8th Grade\"),\r\n        Plot.selectLast({\r\n          x: \"year\",\r\n          y: \"estimate\",\r\n          text: (d) =>\r\n            `${tablesDrugTime[2]?.changeEstimate.toString().substring(asterisk8th)}`, // This is the label that displays in the tooltip\r\n          textAnchor: \"start\",\r\n          fill: \"#ff57f9\",\r\n          fontSize: 20,\r\n          fontWeight: 800,\r\n          dx: 10\r\n        })\r\n      ),\r\n      Plot.text(\r\n        radio.filter((d) => d.grade === \"10th Grade\"),\r\n        Plot.selectLast({\r\n          x: \"year\",\r\n          y: \"estimate\",\r\n          text: (d) =>\r\n            `${tablesDrugTime[0]?.changeEstimate?.toString().substring(asterisk10th)}`,\r\n          textAnchor: \"start\",\r\n          fill: \"#ff57f9\",\r\n          fontSize: 20,\r\n          fontWeight: 800,\r\n          dx: 10\r\n        })\r\n      ),\r\n      Plot.text(\r\n        radio.filter((d) => d.grade === \"12th Grade\"),\r\n        Plot.selectLast({\r\n          x: \"year\",\r\n          y: \"estimate\",\r\n          text: (d) =>\r\n            `${tablesDrugTime[1]?.changeEstimate?.toString().substring(asterisk12th)}`,\r\n          textAnchor: \"start\",\r\n          fill: \"#ff57f9\",\r\n          fontSize: 20,\r\n          fontWeight: 800,\r\n          dx: 10\r\n        })\r\n      )\r\n    ]\r\n  }),\r\n  { fill: \"grade\" }\r\n)\r\n\r\n"},{"methodName":"interpretQuiet","source":"shinyInput('drugs')"},{"methodName":"interpretQuiet","source":"shinyInput('search')"},{"methodName":"interpretQuiet","source":"shinyInput('select')"},{"methodName":"interpretQuiet","source":"shinyInput('radio')"},{"methodName":"interpretQuiet","source":"shinyInput('zoomInButton')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../bx-by/drug-prevalence";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>